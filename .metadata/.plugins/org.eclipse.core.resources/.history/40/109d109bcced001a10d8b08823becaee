/*
 * gnss.c
 *
 *  Created on: 26 Aug 2020
 *      Author: vikylenaidoo
 */

//----------------INCLUDES---------------------------///
#include "gnss.h"
#include "stdbool.h"



//--------------------STATIC FUNCTIONS-------------------//
static bool gnss_ubx_checksum(){
	uint8_t CK_A = 0;
	uint8_t CK_B = 0;

	uint8_t ck_a = GNSS_RX_BUFFER[98];
	uint8_t ck_a = GNSS_RX_BUFFER[99];

	for(int i=0; i<GNSS_BUFFER_SIZE; i++){
		CK_A = CK_A + GNSS_RX_BUFFER[i];
		CK_B = CK_B + CK_A;
	}

	if(CK_A != ck_a)
		return false;

	if(CK_B != ck_b)
		return false;

	return true;

}




//----------------PUBLIC FUNCTIONS--------------------//
GNSS_StatusTypeDef gnss_read_new_data(){
	if(gnss_ubx_checksum())

	for(int i=0; i< GNSS_DATA_LENGTH; i++){
		uint8_t temp = GNSS_RX_BUFFER[i];
		GNSS_RX_BUFFER[i] = 0;
	}


	return GNSS_OK;

}



