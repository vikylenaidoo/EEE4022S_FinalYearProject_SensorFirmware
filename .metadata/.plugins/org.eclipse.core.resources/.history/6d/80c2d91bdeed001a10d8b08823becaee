/*
 * gnss.h
 *
 *  Created on: 15 Aug 2020
 *      Author: vikylenaidoo
 */

#ifndef TASKS_GNSS_H_
#define TASKS_GNSS_H_

//-----------------------INCLUDES----------------------------------------//
#include "uart.h"

//---------------------TASKS INCLUDES-----------------------------------//

//---------------------PUBLIC DEFINES---------------------------------//

#ifdef GNSS_NMEA
//gps data struct
struct GNSS_DataStruct{
	char time		[9];
	char status;
	char latitude	[10];
	char NS;
	char longitude	[10];
	char EW;
	char speed		[5];
	char course		[5];
};
#else

struct GNSS_UBX_Data_Struct{
	//only keep important variables to copy from ubx message


	//info flags

	/*validity flag
	 * 3	validMessage
	 * 2	fullyResolved
	 * 1	validTime
	 * 0	ValidDate */
	uint8_t valid;

	/*GNSS fix type
	 * 0	no fix
	 * 1	dead reckon only
	 * 2 	2d fix
	 * 3	3d fix
	 * 4	GNSS + dead reckon
	 * 5	time fix only*/
	uint8_t fixType;

	/*flags*/
	uint8_t flags;
	uint8_t flags2;
	uint8_t flags3;

	uint8_t numSV;
	int32_t lon;
	int32_t lat;

	int32_t height;
	int32_t hMSL;
	uint32_t hAcc;

	uint32_t vAcc;
	int32_t velN;
	int32_t velE;
	int32_t velD;

	int32_t gSpeed;
	int32_t headMot;
	uint32_t sAcc;
	uint32_t headAcc;


};

#endif
//-------------------PUBLIC VARIABLES----------------------------------//

//--------------------FUNCTION HEADERS----------------------------------//
/*read new data from the gnss_log buffer and out it in the struct*/
GNSS_StatusTypeDef gnss_read_new_data();



#endif /* TASKS_GNSS_H_ */
